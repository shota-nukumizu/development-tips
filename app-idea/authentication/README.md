# アプリケーションの認証

認証(Authentication)とは、ログイン(サインイン)のときに以下のようにアクセス制御を行うことである。

* アクセスしてきたユーザが発行済のIDの持ち主であることを確認する
* ユーザ(ID)に、そのシステムやパソコン、サーバへのアクセスを許可する
* ユーザにシステム上での操作の権限とその範囲を認める
* 権限が不要になったら、次のアクセスまでIDと権限を無効にする(ログアウト、サインアウト)

認証システムは、これらのアクセス制御を行うためのシステムである。

# 認証が必要な理由

認証とは、WebサイトやWebサービスを不正アクセスやマルウェアの侵入から防ぐために必要なものである。近年、サイバー攻撃の数はますます増加し、方法も複雑になっている。そこで、セキュリティを強化して情報や資産を守るためにも強力な認証が要求されている。

# 代表的な認証方法

## ベーシック認証

HTTPの中に組み込まれているベーシック認証とは、最も本格的な認証方法である。暗号化機能はなく、Base64でエンコードされたユーザIDとパスワードをクライアントからサーバに送信する。

まずクライアントはサーバに認証されていないリクエストを送信し、サーバは401エラーを返す。その後、クライアントがユーザIDとパスワードを送信すると、サーバにアクセスできるようになる。

ベーシック認証の最大のメリットは、実装が容易な点や多くのブラウザが対応している点などが列挙される。反対に、暗号化に非対応である点、リクエストごとに毎度認証を行う必要がある点などはデメリットになる。

## セッション認証

セッション認証とは、Cookieを用いて行う認証方法のことで、ベーシック認証のようにリクエストのたびにユーザIDとパスワードを送受信する必要がない。認証フローとしては、最初にクライアントからサーバに情報を送信し、サーバで正しく認証されたらサーバ側でセッションを生成する。サーバはクライアントにセッションCookieを送信し、クライアントはそのCookieとともにリクエストを送信する限りは、サーバにアクセスできる。

セッション認証の最大のメリットは、リクエストのたびに認証情報を送信する必要がないので、ログイン後の処理が高速である点である。豊富なWebフレームワークがあるので、実装が簡単である点もメリットである。

ところが、セッション認証には以下のようなデメリットが存在する。

* サーバ側で認証情報を保持したままなので認証が必要なくてもCookieをリクエストごとに送信する必要がある
* クロスサイトリクエストフォージェリ(CSRF)に弱い

## トークン認証

トークン認証とは、先程のセッション認証で用いていたCookieの代用として、トークンを活用する方法である。トークンはサーバの秘密鍵で署名されており、クライアントはサーバから受け取ったトークンとともにリクエストを送信するという認証フローになっている。

トークン認証の最大のメリットは、サーバ側で認証情報を保持しないステートレスな認証方式であるため、高速な通信を実現できる点である。マイクロサービスアーキテクチャとの相性も抜群である。

トークン認証のデメリットとしては、以下のようなものが挙げられる。

* クライアントの情報保持の方法次第ではクロスサイトスクリプティング(XSS)やクロスサイトリクエストフォージェリの被害を受ける
* トークンは有効期限が過ぎるまでは削除できないので、万が一トークンが漏洩した場合は攻撃者が悪用できる

## ワンタイムパスワード

ワンタイムパスワードはログインする際に、一回だけ使用できるパスワードを発行する認証である。メールアドレスや電話番号など、「確実にアカウント所持者だけが利用できる」と信頼できるシステムを活用して、セキュリティの層を1つ追加できる。

セキュリティが高いのがメリットだが、信頼できるシステムが故障あるいはバッテリー切れで利用できなくなった場合は認証できなくなってしまうのがデメリットとしてある。

## OAuthとOpenID

OAuthやOpenIDは認証プロトコルの1つである。「クライアントが誰か」というような認証機能の他にも、「クライアントに何を許可できるのか」という権限管理機能を持っている。また、GoogleやTwitterなどのソーシャルメディアアカウントを利用したログイン機能を実装でき、パスワード扶養で高いセキュリティを実現できる。

OAuthやOpenIDによる認証のメリットとしては、新しいアカウントを作成する手間が省けることが挙げられる。しかし、デメリットとして他のシステムに依存する部分が生じてしまう点や権限の確認がユーザ側で見過ごされやすい点、ソーシャルメディアアカウントをもっていない人は利用できない点が考えられる。

# 参考

* [認証方式にはどのような種類がある？その中から自社に合う認証方式を選ぶには？](https://www.ctcsp.co.jp/itspice/entry/090.html)
* [ウェブサイトのさまざまな「認証方式」をまとめて比較した結果がコレ - Gigazine](https://gigazine.net/news/20201227-web-authentication-methods-compared/)