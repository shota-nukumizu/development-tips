# DDD(Domain-Driven Design)とは

DDD(ドメイン駆動設計)とはソフトウェアの設計手法であり、「複雑なドメインの設計は、モデルベースで行うべき」であり、また「大半のソフトウェアプロジェクトでは、システムを実装するための特定の技術ではなく、ドメインそのものとドメインのロジックに焦点を当てるべき」であるとする。

ドメイン駆動設計では、ドメインモデルを実現する要素として以下のような者を列挙している。

* エンティティ(参照オブジェクト)：ドメインモデル内のオブジェクトであり、その属性ではなく連続性と識別性によって定義される。
* 値オブジェクト：事物の特性を記述するオブジェクトである。
* サービス：操作がオブジェクトに属さない場合、問題の自然な解決策として、操作をサービスとして実現できる。
* リポジトリ：ドメインオブジェクトを取得するメソッドは、記憶域の実装を簡単に切り替えられるようにするため、専門のリポジトリオブジェクトに処理を移譲するべき。
* ファクトリー：ドメインオブジェクトを生成するメソッドは、実装を簡単に切り替えられるようにするため、専門のファクトリーオブジェクトに処理を移譲するべきである。

DDDはオニオンアーキテクチャとの相性が良い。

# オニオンアーキテクチャとは

オニオンアーキテクチャとは、以下の4層にソフトウェアを分割して設計するアーキテクチャである。

* ドメインモデル層：データ構造に焦点を当てて実装する
* ドメインサービス層：実装する必要はないが、インフラストラクチャ層やアプリケーションサービス層で実装するべき機能を抽象形でまとめておく。この抽象型はアプリケーションサービス層がインフラストラクチャ層を呼ぶときに使用し、引数にはドメインモデル層で使用しているデータ型やそのメンバー型であるべき。
* アプリケーションサービス層：それぞれビジネスロジックを定義することに焦点を当てて実装する。ドメインモデル層のデータ構造を使い、ドメインサービス層で定義された抽象型からインフラストラクチャ層のモジュールや他のアプリケーションサービスのモジュールを扱う。
* インフラストラクチャ層：ドライバやフレームワークを活用し、ユースケース層で使用するデータ構造に変換、またはその逆であるユースケース層からのデータをドライバやフレームワークで利用するための変換に焦点を当てて実装する。このとき、ドメインサービス層で定義した抽象型に沿って設計する。

# 参考

* [Domain-driven design - Wikipedia](https://ja.wikipedia.org/wiki/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E9%A7%86%E5%8B%95%E8%A8%AD%E8%A8%88)
* [オニオンアーキテクチャとは何か - Qiita](https://qiita.com/cocoa-maemae/items/e3f2eabbe0877c2af8d0)
* [クリーンアーキわからんかった人のためのオニオンアーキテクチャ - Zenn](https://zenn.dev/streamwest1629/articles/no-clean_hello-onion-architecture)